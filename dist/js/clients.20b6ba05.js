(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["clients"],{"0481":function(t,e,n){"use strict";var a=n("23e7"),i=n("a2bf"),l=n("7b0b"),r=n("50c4"),o=n("a691"),s=n("65f0");a({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=l(this),n=r(e.length),a=s(e,0);return a.length=i(a,e,e,n,0,void 0===t?1:o(t)),a}})},"07ac":function(t,e,n){var a=n("23e7"),i=n("6f53").values;a({target:"Object",stat:!0},{values:function(t){return i(t)}})},"0b5b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"buttons"},[n("b-button",{attrs:{type:"is-success"},on:{click:function(e){return t.create()}}},[n("i",{staticClass:"fas fa-plus mr-2"}),t._v("Novo cliente ")])],1),n("b-modal",{attrs:{active:t.control.openModal,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){return t.$set(t.control,"openModal",e)},close:function(e){return t.loadClients()}}},[n("client-form",{attrs:{client:t.selectedClient}})],1),n("b-table",{attrs:{data:t.clients,loading:t.control.loading,striped:"",narrowed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"name",label:"Nome"}},[t._v(t._s(e.row.name))]),n("b-table-column",{attrs:{field:"phone",label:"Telefone"}},[t._v(t._s(e.row.phone))]),n("b-table-column",{attrs:{field:"email",label:"Email"}},[t._v(t._s(e.row.email))]),n("b-table-column",{attrs:{field:"actions",label:"Ações",width:"120"}},[n("div",{staticClass:"buttons"},[n("b-button",{attrs:{type:"is-warning",title:"Alterar"},on:{click:function(n){return t.edit(e.row)}}},[n("i",{staticClass:"fas fa-pen has-text-white"})]),n("b-button",{attrs:{type:"is-danger",title:"Excluir"},on:{click:function(n){return t.confirmDelete(e.row)}}},[n("i",{staticClass:"fas fa-times"})])],1)])]}}])},[n("template",{slot:"empty"},[n("section",{directives:[{name:"show",rawName:"v-show",value:!t.control.loading,expression:"!control.loading"}],staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[n("i",{staticClass:"fas fa-frown fa-3x"})]),n("p",[t._v("Nenhum cliente")])])])])],2)],1)])},i=[],l=(n("c975"),n("a434"),n("d3b7"),n("9dce")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card"},[t._m(0),n("section",{staticClass:"modal-card-body"},[n("validation-errors",{attrs:{errors:t.errors}}),n("b-field",{attrs:{label:"Nome"}},[n("b-input",{attrs:{required:"",maxlength:"100"},model:{value:t.client.name,callback:function(e){t.$set(t.client,"name",e)},expression:"client.name"}})],1),n("b-field",{attrs:{label:"Telefone"}},[n("b-input",{attrs:{maxlength:"20"},model:{value:t.client.phone,callback:function(e){t.$set(t.client,"phone",e)},expression:"client.phone"}})],1),n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{type:"email",maxlength:"100"},model:{value:t.client.email,callback:function(e){t.$set(t.client,"email",e)},expression:"client.email"}})],1)],1),n("footer",{staticClass:"modal-card-foot"},[n("b-button",{on:{click:function(e){return t.close()}}},[t._v("Fechar")]),n("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.save()}}},[t._v("Salvar")])],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v("Cliente")])])}],s=n("f876"),c={name:"ClientForm",components:{ValidationErrors:s["a"]},props:{client:Object},data:function(){return{errors:{}}},methods:{close:function(){this.errors={},this.$parent.close()},save:function(){var t=this,e="post",n="clients",a=this.client;this.client.id&&(e="put",n="clients/"+this.client.id),Object(l["a"])({method:e,url:n,data:a}).then((function(){return t.close()})).catch((function(e){return t.errors=e.response.data.errors}))}}},u=c,d=n("2877"),f=Object(d["a"])(u,r,o,!1,null,null,null),h=f.exports,m={name:"Clients",components:{ClientForm:h},data:function(){return{clients:[],selectedClient:null,control:{loading:!0,openModal:!1}}},mounted:function(){this.$route.query.new&&this.create(),this.loadClients()},methods:{loadClients:function(){var t=this;this.control.loading=!0,l["a"].get("clients").then((function(e){return t.clients=e.data})).finally((function(){return t.control.loading=!1}))},create:function(){this.selectedClient={name:"",phone:"",email:""},this.control.openModal=!0},edit:function(t){this.selectedClient=t,this.control.openModal=!0},confirmDelete:function(t){var e=this;this.$buefy.dialog.confirm({title:"Excluir cliente",message:"Tem certeza de que deseja <b>excluir</b> este cliente? Esta ação não poderá ser desfeita.",confirmText:"Sim",cancelText:"Não",type:"is-danger",onConfirm:function(){l["a"].delete("clients/"+t.id).then((function(){var n=e.clients.indexOf(t);e.clients.splice(n,1),e.$buefy.toast.open("Cliente excluído")}))}})}}},p=m,b=Object(d["a"])(p,a,i,!1,null,null,null);e["default"]=b.exports},4069:function(t,e,n){var a=n("44d2");a("flat")},"6f53":function(t,e,n){var a=n("83ab"),i=n("df75"),l=n("fc6a"),r=n("d1e7").f,o=function(t){return function(e){var n,o=l(e),s=i(o),c=s.length,u=0,d=[];while(c>u)n=s[u++],a&&!r.call(o,n)||d.push(t?[n,o[n]]:o[n]);return d}};t.exports={entries:o(!0),values:o(!1)}},a2bf:function(t,e,n){"use strict";var a=n("e8b5"),i=n("50c4"),l=n("0366"),r=function(t,e,n,o,s,c,u,d){var f,h=s,m=0,p=!!u&&l(u,d,3);while(m<o){if(m in n){if(f=p?p(n[m],m,e):n[m],c>0&&a(f))h=r(t,e,f,i(f.length),h,c-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[h]=f}h++}m++}return h};t.exports=r},a434:function(t,e,n){"use strict";var a=n("23e7"),i=n("23cb"),l=n("a691"),r=n("50c4"),o=n("7b0b"),s=n("65f0"),c=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,p=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!h},{splice:function(t,e){var n,a,u,d,f,h,g=o(this),C=r(g.length),x=i(t,C),w=arguments.length;if(0===w?n=a=0:1===w?(n=0,a=C-x):(n=w-2,a=p(m(l(e),0),C-x)),C+n-a>b)throw TypeError(v);for(u=s(g,a),d=0;d<a;d++)f=x+d,f in g&&c(u,d,g[f]);if(u.length=a,n<a){for(d=x;d<C-a;d++)f=d+a,h=d+n,f in g?g[h]=g[f]:delete g[h];for(d=C;d>C-a+n;d--)delete g[d-1]}else if(n>a)for(d=C-a;d>x;d--)f=d+a-1,h=d+n-1,f in g?g[h]=g[f]:delete g[h];for(d=0;d<n;d++)g[d+x]=arguments[d+2];return g.length=C-a+n,u}})},f876:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.validationErrors.length?n("b-message",{attrs:{type:"is-danger",closable:!1}},t._l(t.validationErrors,(function(e){return n("ul",{key:e},[n("li",[t._v(t._s(e))])])})),0):t._e()},i=[],l=(n("0481"),n("4069"),n("07ac"),{props:["errors"],computed:{validationErrors:function(){return Object.values(this.errors).flat()}}}),r=l,o=n("2877"),s=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=s.exports}}]);
//# sourceMappingURL=clients.20b6ba05.js.map